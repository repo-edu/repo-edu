// DO NOT EDIT - Generated by scripts/gen-from-schema.ts
// Source: apps/repo-manage/schemas/types/*.schema.json
// To modify types, edit the schema files and run `pnpm gen:bindings`
#![allow(dead_code)]
#![allow(clippy::upper_case_acronyms)]
use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AffectedGroup {
  pub assignment_id: AssignmentId,
  pub assignment_name: String,
  pub group_id: GroupId,
  pub group_name: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AppError {
  pub message: String,
  #[serde(skip_serializing_if = "Option::is_none")]
  pub details: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AppSettings {
  pub theme: Theme,
  pub date_format: DateFormat,
  pub time_format: TimeFormat,
  pub lms_connection: Option<LmsConnection>,
  pub git_connections: std::collections::HashMap<String, GitConnection>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Assignment {
  pub id: AssignmentId,
  pub name: String,
  pub groups: Vec<Group>,
  pub lms_group_set_id: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AssignmentCoverage {
  pub assignment_id: AssignmentId,
  pub assignment_name: String,
  pub student_count: i64,
  pub missing_students: Vec<StudentSummary>,
}

#[derive(Debug, Clone, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(transparent)]
pub struct AssignmentId(pub String);

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AssignmentMetadata {
  pub id: AssignmentId,
  pub name: String,
  pub lms_group_set_id: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CloneConfig {
  pub target_dir: String,
  pub directory_layout: DirectoryLayout,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CommandResult {
  pub success: bool,
  pub message: String,
  pub details: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CourseInfo {
  pub id: String,
  pub name: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CourseVerifyResult {
  pub success: bool,
  pub message: String,
  pub updated_name: Option<String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "lowercase")]
pub enum CoverageExportFormat {
  #[serde(rename = "csv")]
  Csv,
  #[serde(rename = "xlsx")]
  Xlsx,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CoverageReport {
  pub total_students: i64,
  pub assignments: Vec<AssignmentCoverage>,
  pub students_in_multiple: Vec<StudentMultipleAssignments>,
  pub students_in_none: Vec<StudentSummary>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CreateConfig {
  pub template_org: String,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
pub enum DateFormat {
  MDY,
  #[default]
  DMY,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct DeleteConfig {
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "kebab-case")]
pub enum DirectoryLayout {
  #[serde(rename = "by-team")]
  ByTeam,
  #[serde(rename = "flat")]
  #[default]
  Flat,
  #[serde(rename = "by-task")]
  ByTask,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ExportSettings {
  pub output_folder: String,
  pub output_csv: bool,
  pub output_xlsx: bool,
  pub output_yaml: bool,
  pub csv_file: String,
  pub xlsx_file: String,
  pub yaml_file: String,
  pub member_option: MemberOption,
  pub include_group: bool,
  pub include_member: bool,
  pub include_initials: bool,
  pub full_groups: bool,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GitConnection {
  pub server_type: GitServerType,
  pub connection: PlatformConnection,
  pub identity_mode: Option<GitIdentityMode>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum GitIdentityMode {
  #[serde(rename = "email")]
  Email,
  #[serde(rename = "username")]
  #[default]
  Username,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
pub enum GitServerType {
  GitHub,
  #[default]
  GitLab,
  Gitea,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GitUsernameEntry {
  pub email: String,
  pub git_username: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GitUsernameImportSummary {
  pub matched: i64,
  pub unmatched_emails: Vec<String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum GitUsernameStatus {
  #[serde(rename = "unknown")]
  #[default]
  Unknown,
  #[serde(rename = "valid")]
  Valid,
  #[serde(rename = "invalid")]
  Invalid,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GitVerifyResult {
  pub success: bool,
  pub message: String,
  pub username: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Group {
  pub id: GroupId,
  pub name: String,
  pub member_ids: Vec<StudentId>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupFilter {
  pub kind: String,
  pub selected: Option<Vec<String>>,
  pub pattern: Option<String>,
}

#[derive(Debug, Clone, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(transparent)]
pub struct GroupId(pub String);

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupImportConfig {
  pub group_set_id: String,
  pub filter: GroupFilter,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupImportSummary {
  pub groups_imported: i64,
  pub groups_replaced: i64,
  pub students_referenced: i64,
  pub filter_applied: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportGitUsernamesResult {
  pub summary: GitUsernameImportSummary,
  pub roster: Roster,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportGroupsResult {
  pub summary: GroupImportSummary,
  pub roster: Roster,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportStudentsResult {
  pub summary: ImportSummary,
  pub roster: Roster,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportSummary {
  pub students_added: i64,
  pub students_updated: i64,
  pub students_unchanged: i64,
  pub students_missing_email: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct InvalidUsername {
  pub student_email: String,
  pub student_name: String,
  pub git_username: String,
  pub reason: UsernameInvalidReason,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsConnection {
  pub lms_type: LmsType,
  pub base_url: String,
  pub access_token: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsGroup {
  pub id: String,
  pub name: String,
  pub member_ids: Vec<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsGroupSet {
  pub id: String,
  pub name: String,
  pub groups: Vec<LmsGroup>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsIdConflict {
  pub email: String,
  pub roster_lms_user_id: String,
  pub incoming_lms_user_id: String,
  pub roster_student_name: String,
  pub incoming_student_name: String,
}

pub type LmsType = lms_common::LmsType;

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsVerifyResult {
  pub success: bool,
  pub message: String,
  pub lms_type: Option<LmsType>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
pub enum MemberOption {
  #[serde(rename = "(email, gitid)")]
  #[default]
  EmailAndGitId,
  #[serde(rename = "email")]
  Email,
  #[serde(rename = "git_id")]
  GitId,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct OperationConfigs {
  pub target_org: String,
  pub repo_name_template: String,
  pub create: CreateConfig,
  pub clone: CloneConfig,
  pub delete: DeleteConfig,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct OperationError {
  pub repo_name: String,
  pub message: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct OperationResult {
  pub succeeded: i64,
  pub failed: i64,
  pub skipped_groups: Vec<SkippedGroup>,
  pub errors: Vec<OperationError>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "lowercase")]
pub enum OutputLevel {
  #[serde(rename = "info")]
  Info,
  #[serde(rename = "success")]
  Success,
  #[serde(rename = "warning")]
  Warning,
  #[serde(rename = "error")]
  Error,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct OutputLine {
  pub message: String,
  pub level: OutputLevel,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct PlatformConnection {
  pub access_token: String,
  pub base_url: Option<String>,
  pub user: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ProfileSettings {
  pub course: CourseInfo,
  pub git_connection: Option<String>,
  pub operations: OperationConfigs,
  pub exports: ExportSettings,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RepoCollision {
  pub group_id: GroupId,
  pub group_name: String,
  pub repo_name: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RepoPreflightResult {
  pub collisions: Vec<RepoCollision>,
  pub ready_count: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Roster {
  pub source: Option<RosterSource>,
  pub students: Vec<Student>,
  pub assignments: Vec<Assignment>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RosterSource {
  pub kind: String,
  pub lms_type: Option<LmsType>,
  pub base_url: Option<String>,
  pub fetched_at: Option<chrono::DateTime<chrono::Utc>>,
  pub file_name: Option<String>,
  pub imported_at: Option<chrono::DateTime<chrono::Utc>>,
  pub created_at: Option<chrono::DateTime<chrono::Utc>>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct SettingsLoadResult {
  pub settings: ProfileSettings,
  pub warnings: Vec<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct SkippedGroup {
  pub assignment_id: AssignmentId,
  pub group_id: GroupId,
  pub group_name: String,
  pub reason: SkippedGroupReason,
  pub context: Option<String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum SkippedGroupReason {
  #[serde(rename = "empty_group")]
  EmptyGroup,
  #[serde(rename = "all_members_skipped")]
  AllMembersSkipped,
  #[serde(rename = "repo_exists")]
  RepoExists,
  #[serde(rename = "repo_not_found")]
  RepoNotFound,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Student {
  pub id: StudentId,
  pub name: String,
  pub email: String,
  pub student_number: Option<String>,
  pub git_username: Option<String>,
  pub git_username_status: GitUsernameStatus,
  pub lms_user_id: Option<String>,
  pub custom_fields: std::collections::HashMap<String, String>,
}

#[derive(Debug, Clone, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(transparent)]
pub struct StudentId(pub String);

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct StudentMultipleAssignments {
  pub student: StudentSummary,
  pub assignment_names: Vec<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct StudentRemovalCheck {
  pub student_id: StudentId,
  pub student_name: String,
  pub affected_groups: Vec<AffectedGroup>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct StudentRemovalResult {
  pub removed_from_roster: bool,
  pub removed_from_groups: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct StudentSummary {
  pub id: StudentId,
  pub name: String,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum Theme {
  #[serde(rename = "light")]
  Light,
  #[serde(rename = "dark")]
  Dark,
  #[serde(rename = "system")]
  #[default]
  System,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
pub enum TimeFormat {
  #[serde(rename = "12h")]
  TwelveHour,
  #[serde(rename = "24h")]
  #[default]
  TwentyFourHour,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum UsernameInvalidReason {
  #[serde(rename = "not_found")]
  NotFound,
  #[serde(rename = "blocked")]
  Blocked,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct UsernameVerificationError {
  pub student_email: String,
  pub student_name: String,
  pub git_username: String,
  pub message: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct UsernameVerificationResult {
  pub valid: i64,
  pub invalid: Vec<InvalidUsername>,
  pub errors: Vec<UsernameVerificationError>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum UsernameVerificationScope {
  #[serde(rename = "all")]
  All,
  #[serde(rename = "unknown_only")]
  UnknownOnly,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ValidationIssue {
  pub kind: ValidationKind,
  pub affected_ids: Vec<String>,
  pub context: Option<String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum ValidationKind {
  #[serde(rename = "duplicate_student_id")]
  DuplicateStudentId,
  #[serde(rename = "duplicate_email")]
  DuplicateEmail,
  #[serde(rename = "duplicate_assignment_name")]
  DuplicateAssignmentName,
  #[serde(rename = "duplicate_group_id_in_assignment")]
  DuplicateGroupIdInAssignment,
  #[serde(rename = "duplicate_group_name_in_assignment")]
  DuplicateGroupNameInAssignment,
  #[serde(rename = "duplicate_repo_name_in_assignment")]
  DuplicateRepoNameInAssignment,
  #[serde(rename = "student_in_multiple_groups_in_assignment")]
  StudentInMultipleGroupsInAssignment,
  #[serde(rename = "orphan_group_member")]
  OrphanGroupMember,
  #[serde(rename = "missing_git_username")]
  MissingGitUsername,
  #[serde(rename = "invalid_git_username")]
  InvalidGitUsername,
  #[serde(rename = "empty_group")]
  EmptyGroup,
  #[serde(rename = "missing_email")]
  MissingEmail,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ValidationResult {
  pub issues: Vec<ValidationIssue>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct VerifyGitUsernamesResult {
  pub verification: UsernameVerificationResult,
  pub roster: Roster,
}
