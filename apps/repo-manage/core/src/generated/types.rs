// DO NOT EDIT - Generated by scripts/gen-from-schema.ts
// Source: apps/repo-manage/schemas/types/*.schema.json
// To modify types, edit the schema files and run `pnpm gen:bindings`
#![allow(dead_code)]
#![allow(clippy::upper_case_acronyms)]
use serde::{Deserialize, Serialize};
use std::collections::HashMap;
use serde_json::Value;

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AffectedGroup {
  pub assignment_id: AssignmentId,
  pub assignment_name: String,
  pub group_id: String,
  pub group_name: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AppError {
  pub message: String,
  #[serde(skip_serializing_if = "Option::is_none")]
  pub details: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AppSettings {
  pub theme: Theme,
  pub date_format: DateFormat,
  pub time_format: TimeFormat,
  pub lms_connection: Option<LmsConnection>,
  pub git_connections: HashMap<String, GitConnection>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Assignment {
  pub id: AssignmentId,
  pub name: String,
  pub group_set_id: String,
}

#[derive(Debug, Clone, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(transparent)]
pub struct AssignmentId(pub String);

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AssignmentMetadata {
  pub id: AssignmentId,
  pub name: String,
  pub group_set_id: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CloneConfig {
  pub target_dir: String,
  pub directory_layout: DirectoryLayout,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CommandResult {
  pub success: bool,
  pub message: String,
  pub details: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CourseInfo {
  pub id: String,
  pub name: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CourseVerifyResult {
  pub success: bool,
  pub message: String,
  pub updated_name: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct CreateConfig {
  pub template_org: String,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
pub enum DateFormat {
  MDY,
  #[default]
  DMY,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct DeleteConfig {
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "kebab-case")]
pub enum DirectoryLayout {
  #[serde(rename = "by-team")]
  ByTeam,
  #[serde(rename = "flat")]
  #[default]
  Flat,
  #[serde(rename = "by-task")]
  ByTask,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum EnrollmentType {
  #[serde(rename = "student")]
  #[default]
  Student,
  #[serde(rename = "teacher")]
  Teacher,
  #[serde(rename = "ta")]
  Ta,
  #[serde(rename = "designer")]
  Designer,
  #[serde(rename = "observer")]
  Observer,
  #[serde(rename = "other")]
  Other,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ExportSettings {
  pub output_folder: String,
  pub output_csv: bool,
  pub output_xlsx: bool,
  pub output_yaml: bool,
  pub csv_file: String,
  pub xlsx_file: String,
  pub yaml_file: String,
  pub member_option: MemberOption,
  pub include_group: bool,
  pub include_member: bool,
  pub include_initials: bool,
  pub full_groups: bool,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GitConnection {
  pub server_type: GitServerType,
  pub connection: PlatformConnection,
  pub identity_mode: Option<GitIdentityMode>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum GitIdentityMode {
  #[serde(rename = "email")]
  Email,
  #[serde(rename = "username")]
  #[default]
  Username,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
pub enum GitServerType {
  #[default]
  GitHub,
  GitLab,
  Gitea,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GitUsernameEntry {
  pub email: String,
  pub git_username: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GitUsernameImportSummary {
  pub matched: i64,
  pub unmatched_emails: Vec<String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum GitUsernameStatus {
  #[serde(rename = "unknown")]
  #[default]
  Unknown,
  #[serde(rename = "valid")]
  Valid,
  #[serde(rename = "invalid")]
  Invalid,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GitVerifyResult {
  pub success: bool,
  pub message: String,
  pub username: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Group {
  pub id: String,
  pub name: String,
  pub member_ids: Vec<RosterMemberId>,
  pub origin: String,
  pub lms_group_id: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupImportSummary {
  pub groups_imported: i64,
  pub groups_replaced: i64,
  pub students_referenced: i64,
  pub filter_applied: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(tag = "kind")]
pub enum GroupSelectionMode {
  #[serde(rename = "all")]
  All {
    excluded_group_ids: Vec<String>,
  },
  #[serde(rename = "pattern")]
  Pattern {
    pattern: String,
    excluded_group_ids: Vec<String>,
  },
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupSelectionPreview {
  pub valid: bool,
  pub error: Option<String>,
  pub group_ids: Vec<String>,
  pub empty_group_ids: Vec<String>,
  pub group_member_counts: Vec<Value>,
  pub total_groups: i64,
  pub matched_groups: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupSet {
  pub id: String,
  pub name: String,
  pub group_ids: Vec<String>,
  pub connection: Option<GroupSetConnection>,
  pub group_selection: GroupSelectionMode,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(tag = "kind")]
pub enum GroupSetConnection {
  #[serde(rename = "system")]
  System {
    system_type: String,
  },
  #[serde(rename = "canvas")]
  Canvas {
    course_id: String,
    group_set_id: String,
    last_updated: chrono::DateTime<chrono::Utc>,
  },
  #[serde(rename = "moodle")]
  Moodle {
    course_id: String,
    grouping_id: String,
    last_updated: chrono::DateTime<chrono::Utc>,
  },
  #[serde(rename = "import")]
  Import {
    source_filename: String,
    #[serde(default)]
    #[serde(skip_serializing_if = "Option::is_none")]
    source_path: Option<String>,
    last_updated: chrono::DateTime<chrono::Utc>,
  },
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(tag = "mode")]
pub enum GroupSetImportPreview {
  #[serde(rename = "import")]
  Import {
    groups: Vec<Value>,
    missing_members: Vec<Value>,
    total_missing: i64,
  },
  #[serde(rename = "reimport")]
  Reimport {
    groups: Vec<Value>,
    missing_members: Vec<Value>,
    total_missing: i64,
    added_group_names: Vec<String>,
    removed_group_names: Vec<String>,
    updated_group_names: Vec<String>,
    renamed_groups: Vec<Value>,
  },
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupSetImportResult {
  pub mode: String,
  pub group_set: GroupSet,
  pub groups_upserted: Vec<Group>,
  pub deleted_group_ids: Vec<String>,
  pub missing_members: Vec<Value>,
  pub total_missing: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupSetSyncResult {
  pub group_set: GroupSet,
  pub groups_upserted: Vec<Group>,
  pub deleted_group_ids: Vec<String>,
  pub missing_members: Vec<Value>,
  pub total_missing: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupFileImportResult {
  pub summary: GroupFileImportSummary,
  pub roster: Roster,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct GroupFileImportSummary {
  pub groups_added: i64,
  pub groups_removed: i64,
  pub groups_renamed: i64,
  pub members_added: i64,
  pub members_removed: i64,
  pub members_moved: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportConflict {
  pub match_key: String,
  pub value: String,
  pub matched_ids: Vec<RosterMemberId>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportGitUsernamesResult {
  pub summary: GitUsernameImportSummary,
  pub roster: Roster,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportGroupsResult {
  pub summary: GroupImportSummary,
  pub roster: Roster,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportRosterResult {
  pub summary: ImportSummary,
  pub roster: Roster,
  pub conflicts: Vec<ImportConflict>,
  pub total_conflicts: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportStudentsResult {
  pub summary: ImportSummary,
  pub roster: Roster,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportSummary {
  pub students_added: i64,
  pub students_updated: i64,
  pub students_unchanged: i64,
  pub students_missing_email: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct InvalidUsername {
  pub student_email: String,
  pub student_name: String,
  pub git_username: String,
  pub reason: UsernameInvalidReason,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsConnection {
  pub lms_type: LmsType,
  pub base_url: String,
  pub access_token: String,
  pub user_agent: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsContextKey {
  pub lms_type: LmsType,
  pub base_url: String,
  pub course_id: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsGroup {
  pub id: String,
  pub name: String,
  pub member_ids: Vec<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsGroupSet {
  pub id: String,
  pub name: String,
  pub groups: Vec<LmsGroup>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsOperationContext {
  pub connection: LmsConnection,
  pub course_id: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsIdConflict {
  pub email: String,
  pub roster_lms_user_id: String,
  pub incoming_lms_user_id: String,
  pub roster_student_name: String,
  pub incoming_student_name: String,
}

pub type LmsType = lms_common::LmsType;

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LmsVerifyResult {
  pub success: bool,
  pub message: String,
  pub lms_type: Option<LmsType>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
pub enum MemberOption {
  #[serde(rename = "(email, gitid)")]
  #[default]
  EmailAndGitId,
  #[serde(rename = "email")]
  Email,
  #[serde(rename = "git_id")]
  GitId,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum MemberStatus {
  #[serde(rename = "active")]
  #[default]
  Active,
  #[serde(rename = "incomplete")]
  Incomplete,
  #[serde(rename = "dropped")]
  Dropped,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct OperationConfigs {
  pub target_org: String,
  pub repo_name_template: String,
  pub create: CreateConfig,
  pub clone: CloneConfig,
  pub delete: DeleteConfig,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct OperationError {
  pub repo_name: String,
  pub message: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct OperationResult {
  pub succeeded: i64,
  pub failed: i64,
  pub skipped_groups: Vec<SkippedGroup>,
  pub errors: Vec<OperationError>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct PatternFilterResult {
  pub valid: bool,
  pub error: Option<String>,
  pub matched_indexes: Vec<i64>,
  pub matched_count: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct PlatformConnection {
  pub access_token: String,
  pub base_url: Option<String>,
  pub user: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ProfileSettings {
  pub course: CourseInfo,
  pub course_verified_at: Option<String>,
  pub git_connection: Option<String>,
  pub operations: OperationConfigs,
  pub exports: ExportSettings,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RepoCollision {
  pub group_id: String,
  pub group_name: String,
  pub repo_name: String,
  pub kind: RepoCollisionKind,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RepoOperationContext {
  pub target_org: String,
  pub repo_name_template: String,
  pub git_connection: GitConnection,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum RepoCollisionKind {
  #[serde(rename = "already_exists")]
  AlreadyExists,
  #[serde(rename = "not_found")]
  NotFound,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RepoPreflightResult {
  pub collisions: Vec<RepoCollision>,
  pub ready_count: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Roster {
  pub connection: Option<RosterConnection>,
  pub students: Vec<RosterMember>,
  pub staff: Vec<RosterMember>,
  pub groups: Vec<Group>,
  pub group_sets: Vec<GroupSet>,
  pub assignments: Vec<Assignment>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(tag = "kind")]
pub enum RosterConnection {
  #[serde(rename = "canvas")]
  Canvas {
    course_id: String,
    last_updated: chrono::DateTime<chrono::Utc>,
  },
  #[serde(rename = "moodle")]
  Moodle {
    course_id: String,
    last_updated: chrono::DateTime<chrono::Utc>,
  },
  #[serde(rename = "import")]
  Import {
    source_filename: String,
    last_updated: chrono::DateTime<chrono::Utc>,
  },
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RosterMember {
  pub id: RosterMemberId,
  pub name: String,
  pub email: String,
  pub student_number: Option<String>,
  pub git_username: Option<String>,
  pub git_username_status: GitUsernameStatus,
  pub status: MemberStatus,
  pub lms_user_id: Option<String>,
  pub enrollment_type: EnrollmentType,
  pub enrollment_display: Option<String>,
  pub department: Option<String>,
  pub institution: Option<String>,
  pub source: String,
}

#[derive(Debug, Clone, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(transparent)]
pub struct RosterMemberId(pub String);

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct SettingsLoadResult {
  pub settings: ProfileSettings,
  pub warnings: Vec<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct SkippedGroup {
  pub assignment_id: AssignmentId,
  pub group_id: String,
  pub group_name: String,
  pub reason: SkippedGroupReason,
  pub context: Option<String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum SkippedGroupReason {
  #[serde(rename = "empty_group")]
  EmptyGroup,
  #[serde(rename = "all_members_skipped")]
  AllMembersSkipped,
  #[serde(rename = "repo_exists")]
  RepoExists,
  #[serde(rename = "repo_not_found")]
  RepoNotFound,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Student {
  pub id: StudentId,
  pub name: String,
  pub email: String,
  pub student_number: Option<String>,
  pub git_username: Option<String>,
  pub git_username_status: GitUsernameStatus,
  pub status: StudentStatus,
  pub lms_user_id: Option<String>,
  pub custom_fields: HashMap<String, String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum StudentStatus {
  #[serde(rename = "active")]
  #[default]
  Active,
  #[serde(rename = "dropped")]
  Dropped,
  #[serde(rename = "incomplete")]
  Incomplete,
}

#[derive(Debug, Clone, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(transparent)]
pub struct StudentId(pub String);

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct StudentRemovalCheck {
  pub student_id: StudentId,
  pub student_name: String,
  pub affected_groups: Vec<AffectedGroup>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct StudentRemovalResult {
  pub removed_from_roster: bool,
  pub removed_from_groups: i64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct SystemGroupSetEnsureResult {
  pub group_sets: Vec<GroupSet>,
  pub groups_upserted: Vec<Group>,
  pub deleted_group_ids: Vec<String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
#[serde(rename_all = "lowercase")]
pub enum Theme {
  #[serde(rename = "light")]
  Light,
  #[serde(rename = "dark")]
  Dark,
  #[serde(rename = "system")]
  #[default]
  System,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize, Default)]
pub enum TimeFormat {
  #[serde(rename = "12h")]
  TwelveHour,
  #[serde(rename = "24h")]
  #[default]
  TwentyFourHour,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum UsernameInvalidReason {
  #[serde(rename = "not_found")]
  NotFound,
  #[serde(rename = "blocked")]
  Blocked,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct UsernameVerificationError {
  pub student_email: String,
  pub student_name: String,
  pub git_username: String,
  pub message: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct UsernameVerificationResult {
  pub valid: i64,
  pub invalid: Vec<InvalidUsername>,
  pub errors: Vec<UsernameVerificationError>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum UsernameVerificationScope {
  #[serde(rename = "all")]
  All,
  #[serde(rename = "unknown_only")]
  UnknownOnly,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ValidationIssue {
  pub kind: ValidationKind,
  pub affected_ids: Vec<String>,
  pub context: Option<String>,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum ValidationKind {
  #[serde(rename = "duplicate_student_id")]
  DuplicateStudentId,
  #[serde(rename = "duplicate_email")]
  DuplicateEmail,
  #[serde(rename = "invalid_email")]
  InvalidEmail,
  #[serde(rename = "duplicate_assignment_name")]
  DuplicateAssignmentName,
  #[serde(rename = "duplicate_group_id_in_assignment")]
  DuplicateGroupIdInAssignment,
  #[serde(rename = "duplicate_group_name_in_assignment")]
  DuplicateGroupNameInAssignment,
  #[serde(rename = "duplicate_repo_name_in_assignment")]
  DuplicateRepoNameInAssignment,
  #[serde(rename = "student_in_multiple_groups_in_assignment")]
  StudentInMultipleGroupsInAssignment,
  #[serde(rename = "orphan_group_member")]
  OrphanGroupMember,
  #[serde(rename = "missing_git_username")]
  MissingGitUsername,
  #[serde(rename = "invalid_git_username")]
  InvalidGitUsername,
  #[serde(rename = "empty_group")]
  EmptyGroup,
  #[serde(rename = "unassigned_student")]
  UnassignedStudent,
  #[serde(rename = "missing_email")]
  MissingEmail,
  #[serde(rename = "system_group_sets_missing")]
  SystemGroupSetsMissing,
  #[serde(rename = "invalid_enrollment_partition")]
  InvalidEnrollmentPartition,
  #[serde(rename = "invalid_group_origin")]
  InvalidGroupOrigin,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ValidationResult {
  pub issues: Vec<ValidationIssue>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct VerifyGitUsernamesResult {
  pub verification: UsernameVerificationResult,
  pub roster: Roster,
}
