{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "commands": {
    "get_token_instructions": {
      "description": "Get token generation instructions for an LMS type",
      "input": [
        {
          "name": "lms_type",
          "type": "String"
        }
      ],
      "output": "String",
      "error": "AppError"
    },
    "open_token_url": {
      "description": "Open the LMS token generation page in the browser",
      "input": [
        {
          "name": "base_url",
          "type": "String"
        },
        {
          "name": "lms_type",
          "type": "String"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "verify_lms_course": {
      "description": "Verify LMS course credentials and fetch course information",
      "input": [
        {
          "name": "params",
          "type": "VerifyCourseParams"
        }
      ],
      "output": "VerifyCourseResult",
      "error": "AppError"
    },
    "generate_lms_files": {
      "description": "Generate student files from an LMS course",
      "input": [
        {
          "name": "params",
          "type": "GenerateFilesParams"
        },
        {
          "name": "progress",
          "type": "Channel<String>"
        }
      ],
      "output": "CommandResult",
      "error": "AppError"
    },
    "get_group_categories": {
      "description": "Get group categories (group sets) for a course",
      "input": [
        {
          "name": "params",
          "type": "GetGroupCategoriesParams"
        }
      ],
      "output": "Vec<GroupCategory>",
      "error": "AppError"
    },
    "verify_lms_connection": {
      "description": "Verify LMS connection using app-level LMS connection",
      "input": [
        {
          "name": "context",
          "type": "LmsOperationContext"
        }
      ],
      "output": "LmsVerifyResult",
      "error": "AppError"
    },
    "verify_lms_connection_draft": {
      "description": "Verify draft LMS connection (before saving)",
      "input": [
        {
          "name": "context",
          "type": "LmsOperationContext"
        }
      ],
      "output": "LmsVerifyResult",
      "error": "AppError"
    },
    "fetch_lms_courses": {
      "description": "Fetch courses from LMS (for profile creation)",
      "input": [],
      "output": "Vec<CourseInfo>",
      "error": "AppError"
    },
    "fetch_lms_courses_draft": {
      "description": "Fetch courses using draft connection (inline setup)",
      "input": [
        {
          "name": "connection",
          "type": "LmsConnection"
        }
      ],
      "output": "Vec<CourseInfo>",
      "error": "AppError"
    },
    "import_students_from_lms": {
      "description": "Import students from LMS, merge into roster",
      "input": [
        {
          "name": "context",
          "type": "LmsOperationContext"
        },
        {
          "name": "roster",
          "type": "Option<Roster>"
        }
      ],
      "output": "ImportStudentsResult",
      "error": "AppError"
    },
    "import_students_from_file": {
      "description": "Import students from CSV/Excel file",
      "input": [
        {
          "name": "profile",
          "type": "String"
        },
        {
          "name": "roster",
          "type": "Option<Roster>"
        },
        {
          "name": "file_path",
          "type": "PathBuf"
        }
      ],
      "output": "ImportStudentsResult",
      "error": "AppError"
    },
    "fetch_lms_group_set_list": {
      "description": "Fetch group-set names/ids only (fast)",
      "input": [
        {
          "name": "context",
          "type": "LmsOperationContext"
        }
      ],
      "output": "Vec<LmsGroupSet>",
      "error": "AppError"
    },
    "fetch_lms_groups_for_set": {
      "description": "Fetch groups for a specific group-set",
      "input": [
        {
          "name": "context",
          "type": "LmsOperationContext"
        },
        {
          "name": "group_set_id",
          "type": "String"
        }
      ],
      "output": "Vec<LmsGroup>",
      "error": "AppError"
    },
    "sync_group_set": {
      "description": "Sync LMS group set: fetch from LMS, update groups in place",
      "input": [
        {
          "name": "context",
          "type": "LmsOperationContext"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "group_set_id",
          "type": "String"
        }
      ],
      "output": "GroupSetSyncResult",
      "error": "AppError"
    },
    "import_roster_from_lms": {
      "description": "Import full roster from LMS (students + staff), merge into existing roster",
      "input": [
        {
          "name": "context",
          "type": "LmsOperationContext"
        },
        {
          "name": "roster",
          "type": "Option<Roster>"
        }
      ],
      "output": "ImportRosterResult",
      "error": "AppError"
    },
    "ensure_system_group_sets": {
      "description": "Create/repair system group sets and normalize group memberships (idempotent)",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        }
      ],
      "output": "SystemGroupSetEnsureResult",
      "error": "AppError"
    },
    "normalize_group_name": {
      "description": "Normalize a group name using backend slug rules",
      "input": [
        {
          "name": "name",
          "type": "String"
        }
      ],
      "output": "String",
      "error": "AppError"
    },
    "preview_group_selection": {
      "description": "Validate glob and resolve group IDs for assignment preview",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "group_set_id",
          "type": "String"
        },
        {
          "name": "group_selection",
          "type": "GroupSelectionMode"
        }
      ],
      "output": "GroupSelectionPreview",
      "error": "AppError"
    },
    "filter_by_pattern": {
      "description": "Validate glob and return matched value indexes for UI filtering",
      "input": [
        {
          "name": "pattern",
          "type": "String"
        },
        {
          "name": "values",
          "type": "Vec<String>"
        }
      ],
      "output": "PatternFilterResult",
      "error": "AppError"
    },
    "preview_import_group_set": {
      "description": "Parse CSV for import preview (no persistence)",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "file_path",
          "type": "PathBuf"
        }
      ],
      "output": "GroupSetImportPreview",
      "error": "AppError"
    },
    "import_group_set": {
      "description": "Parse CSV and create new group set",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "file_path",
          "type": "PathBuf"
        }
      ],
      "output": "GroupSetImportResult",
      "error": "AppError"
    },
    "preview_reimport_group_set": {
      "description": "Re-parse CSV for reimport preview (no persistence)",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "group_set_id",
          "type": "String"
        },
        {
          "name": "file_path",
          "type": "PathBuf"
        }
      ],
      "output": "GroupSetImportPreview",
      "error": "AppError"
    },
    "reimport_group_set": {
      "description": "Re-parse CSV and update existing group set",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "group_set_id",
          "type": "String"
        },
        {
          "name": "file_path",
          "type": "PathBuf"
        }
      ],
      "output": "GroupSetImportResult",
      "error": "AppError"
    },
    "export_group_set": {
      "description": "Export group set to CSV file",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "group_set_id",
          "type": "String"
        },
        {
          "name": "file_path",
          "type": "PathBuf"
        }
      ],
      "output": "String",
      "error": "AppError"
    },
    "normalize_context": {
      "description": "Normalize LMS context fields (type, base URL, course)",
      "input": [
        {
          "name": "lms_type",
          "type": "LmsType"
        },
        {
          "name": "base_url",
          "type": "String"
        },
        {
          "name": "course_id",
          "type": "String"
        }
      ],
      "output": "LmsContextKey",
      "error": "AppError"
    },
    "verify_profile_course": {
      "description": "Verify profile course exists in LMS and return updated name if changed",
      "input": [
        {
          "name": "profile",
          "type": "String"
        }
      ],
      "output": "CourseVerifyResult",
      "error": "AppError"
    },
    "verify_git_connection": {
      "description": "Verify named git connection",
      "input": [
        {
          "name": "name",
          "type": "String"
        }
      ],
      "output": "GitVerifyResult",
      "error": "AppError"
    },
    "verify_git_connection_draft": {
      "description": "Verify draft git connection (before saving)",
      "input": [
        {
          "name": "connection",
          "type": "GitConnection"
        }
      ],
      "output": "GitVerifyResult",
      "error": "AppError"
    },
    "list_profiles": {
      "description": "List all available profiles",
      "input": [],
      "output": "Vec<String>",
      "error": "AppError"
    },
    "get_active_profile": {
      "description": "Get the currently active profile",
      "input": [],
      "output": "Option<String>",
      "error": "AppError"
    },
    "set_active_profile": {
      "description": "Set the active profile",
      "input": [
        {
          "name": "name",
          "type": "String"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "load_profile": {
      "description": "Load a profile by name, returning any migration warnings",
      "input": [
        {
          "name": "name",
          "type": "String"
        }
      ],
      "output": "SettingsLoadResult",
      "error": "AppError"
    },
    "load_profile_settings": {
      "description": "Load a profile by name without changing the active profile",
      "input": [
        {
          "name": "name",
          "type": "String"
        }
      ],
      "output": "SettingsLoadResult",
      "error": "AppError"
    },
    "save_profile": {
      "description": "Save profile settings as a named profile (app settings are not touched)",
      "input": [
        {
          "name": "name",
          "type": "String"
        },
        {
          "name": "profile",
          "type": "ProfileSettings"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "save_profile_and_roster": {
      "description": "Save profile settings and roster together (atomic)",
      "input": [
        {
          "name": "name",
          "type": "String"
        },
        {
          "name": "profile",
          "type": "ProfileSettings"
        },
        {
          "name": "roster",
          "type": "Option<Roster>"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "delete_profile": {
      "description": "Delete a profile by name",
      "input": [
        {
          "name": "name",
          "type": "String"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "rename_profile": {
      "description": "Rename a profile",
      "input": [
        {
          "name": "old_name",
          "type": "String"
        },
        {
          "name": "new_name",
          "type": "String"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "create_profile": {
      "description": "Create a new profile with required course binding",
      "input": [
        {
          "name": "name",
          "type": "String"
        },
        {
          "name": "course",
          "type": "CourseInfo"
        }
      ],
      "output": "ProfileSettings",
      "error": "AppError"
    },
    "load_settings": {
      "description": "Load settings from disk with warnings for any corrected issues",
      "input": [],
      "output": "SettingsLoadResult",
      "error": "AppError"
    },
    "load_app_settings": {
      "description": "Load app-level settings (theme, window position, etc.)",
      "input": [],
      "output": "AppSettings",
      "error": "AppError"
    },
    "save_app_settings": {
      "description": "Save only app-level settings (theme, window position, etc.)",
      "input": [
        {
          "name": "settings",
          "type": "AppSettings"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "list_git_connections": {
      "description": "List saved git connection names",
      "input": [],
      "output": "Vec<String>",
      "error": "AppError"
    },
    "get_git_connection": {
      "description": "Get a named git connection",
      "input": [
        {
          "name": "name",
          "type": "String"
        }
      ],
      "output": "GitConnection",
      "error": "AppError"
    },
    "save_git_connection": {
      "description": "Save a named git connection",
      "input": [
        {
          "name": "name",
          "type": "String"
        },
        {
          "name": "connection",
          "type": "GitConnection"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "delete_git_connection": {
      "description": "Delete a named git connection",
      "input": [
        {
          "name": "name",
          "type": "String"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "get_identity_mode": {
      "description": "Get identity mode for a connection name",
      "input": [
        {
          "name": "connection_name",
          "type": "String"
        }
      ],
      "output": "GitIdentityMode",
      "error": "AppError"
    },
    "reset_settings": {
      "description": "Reset settings to defaults",
      "input": [],
      "output": "ProfileSettings",
      "error": "AppError"
    },
    "get_default_settings": {
      "description": "Get default settings (single source of truth from Rust)",
      "input": [],
      "output": "ProfileSettings",
      "error": null
    },
    "get_settings_path": {
      "description": "Get settings file path",
      "input": [],
      "output": "String",
      "error": "AppError"
    },
    "settings_exist": {
      "description": "Check if settings file exists",
      "input": [],
      "output": "bool",
      "error": "AppError"
    },
    "import_settings": {
      "description": "Import settings from a specific file",
      "input": [
        {
          "name": "path",
          "type": "String"
        }
      ],
      "output": "ProfileSettings",
      "error": "AppError"
    },
    "export_settings": {
      "description": "Export settings to a specific file",
      "input": [
        {
          "name": "settings",
          "type": "ProfileSettings"
        },
        {
          "name": "path",
          "type": "String"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "get_settings_schema": {
      "description": "Get the JSON schema for ProfileSettings",
      "input": [],
      "output": "String",
      "error": "AppError"
    },
    "load_settings_or_default": {
      "description": "Load settings or return defaults (never fails)",
      "input": [],
      "output": "ProfileSettings",
      "error": "AppError"
    },
    "get_roster": {
      "description": "Load roster by profile name",
      "input": [
        {
          "name": "profile",
          "type": "String"
        }
      ],
      "output": "Option<Roster>",
      "error": "AppError"
    },
    "clear_roster": {
      "description": "Clear roster data for a profile",
      "input": [
        {
          "name": "profile",
          "type": "String"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "import_git_usernames": {
      "description": "Import git usernames from CSV",
      "input": [
        {
          "name": "profile",
          "type": "String"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "csv_path",
          "type": "PathBuf"
        }
      ],
      "output": "ImportGitUsernamesResult",
      "error": "AppError"
    },
    "verify_git_usernames": {
      "description": "Verify git usernames exist on platform",
      "input": [
        {
          "name": "profile",
          "type": "String"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "scope",
          "type": "UsernameVerificationScope"
        }
      ],
      "output": "VerifyGitUsernamesResult",
      "error": "AppError"
    },
    "export_teams": {
      "description": "Export teams to YAML for git operations",
      "input": [
        {
          "name": "profile",
          "type": "String"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "path",
          "type": "PathBuf"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "export_groups_for_edit": {
      "description": "Export assignment groups for external editing",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "path",
          "type": "PathBuf"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "export_students": {
      "description": "Export all students to CSV/XLSX",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "path",
          "type": "PathBuf"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "export_assignment_students": {
      "description": "Export assignment students with group info",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "path",
          "type": "PathBuf"
        }
      ],
      "output": "()",
      "error": "AppError"
    },
    "validate_roster": {
      "description": "Validate roster (students)",
      "input": [
        {
          "name": "roster",
          "type": "Roster"
        }
      ],
      "output": "ValidationResult",
      "error": "AppError"
    },
    "validate_assignment": {
      "description": "Validate assignment groups within a roster",
      "input": [
        {
          "name": "identity_mode",
          "type": "GitIdentityMode"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        }
      ],
      "output": "ValidationResult",
      "error": "AppError"
    },
    "preflight_create_repos": {
      "description": "Preflight check for create: identifies repos that already exist",
      "input": [
        {
          "name": "context",
          "type": "RepoOperationContext"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "config",
          "type": "CreateConfig"
        }
      ],
      "output": "RepoPreflightResult",
      "error": "AppError"
    },
    "preflight_clone_repos": {
      "description": "Preflight check for clone: identifies repos that don't exist",
      "input": [
        {
          "name": "context",
          "type": "RepoOperationContext"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "config",
          "type": "CloneConfig"
        }
      ],
      "output": "RepoPreflightResult",
      "error": "AppError"
    },
    "preflight_delete_repos": {
      "description": "Preflight check for delete: identifies repos that don't exist",
      "input": [
        {
          "name": "context",
          "type": "RepoOperationContext"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "config",
          "type": "DeleteConfig"
        }
      ],
      "output": "RepoPreflightResult",
      "error": "AppError"
    },
    "create_repos": {
      "description": "Create repos for assignment groups",
      "input": [
        {
          "name": "context",
          "type": "RepoOperationContext"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "config",
          "type": "CreateConfig"
        }
      ],
      "output": "OperationResult",
      "error": "AppError"
    },
    "clone_repos_from_roster": {
      "description": "Clone repos for assignment groups",
      "input": [
        {
          "name": "context",
          "type": "RepoOperationContext"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "config",
          "type": "CloneConfig"
        }
      ],
      "output": "OperationResult",
      "error": "AppError"
    },
    "delete_repos": {
      "description": "Delete repos for assignment groups",
      "input": [
        {
          "name": "context",
          "type": "RepoOperationContext"
        },
        {
          "name": "roster",
          "type": "Roster"
        },
        {
          "name": "assignment_id",
          "type": "AssignmentId"
        },
        {
          "name": "config",
          "type": "DeleteConfig"
        }
      ],
      "output": "OperationResult",
      "error": "AppError"
    },
    "reveal_profiles_directory": {
      "description": "Open the profiles directory in the system file manager",
      "input": [],
      "output": "()",
      "error": "AppError"
    }
  }
}
